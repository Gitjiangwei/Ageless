<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
	<meta charset="UTF-8">
	<link rel="shortcut icon" href="favicon.ico"/>
	<link rel="stylesheet" href="/css/iconfont.css"/>
	<link rel="stylesheet" href="/css/global.css"/>
	<link rel="stylesheet" href="/css/bootstrap.min.css"/>
	<link rel="stylesheet" href="/css/bootstrap-theme.min.css"/>
	<link rel="stylesheet" href="/css/login.css"/>
	<link rel="stylesheet" href="/css/jquery.idcode.css"/>
	<script src="/js/jquery.1.12.4.min.js" charset="UTF-8"></script>
	<script src="/js/bootstrap.min.js" charset="UTF-8"></script>
	<script src="/js/jquery.form.js" charset="UTF-8"></script>
	<script src="/js/global.js" charset="UTF-8"></script>
	<script src="/js/login.js" charset="UTF-8"></script>
	<script src="/js/jquery.idcode.js" charset="UTF-8"></script>

	<title>U袋网 - 登录 / 注册</title>
</head>
<body>
	<div class="public-head-layout container">
		<a class="logo" href="/ageless/index.html"><img src="/images/icons/logo.jpg" alt="U袋网" class="cover"/></a>
	</div>
	<div style="background:url(/images/login_bg.jpg) no-repeat center center; ">
		<div class="login-layout container">
			<div class="form-box login">
				<div class="tabs-nav">
					<h2>欢迎登录U袋网平台</h2>
				</div>
				<div class="tabs_container">
					<form class="tabs_form" action="" method="post" id="login_form">
						<div class="form-group">
							<div class="input-group">
								<div class="input-group-addon">
									<span class="glyphicon glyphicon-phone" aria-hidden="true"></span>
								</div>
								<input class="form-control phone" name="phone" id="login_phone" required placeholder="手机号/邮箱" maxlength="32" autocomplete="off" type="text">
							</div>
						</div>
						<div class="form-group">
							<div class="input-group">
								<div class="input-group-addon">
									<span class="glyphicon glyphicon-lock" aria-hidden="true"></span>
								</div>
								<input class="form-control password" name="password" id="login_pwd" placeholder="请输入密码" autocomplete="off" type="password">
								<div class="input-group-addon pwd-toggle" title="显示密码"><span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span></div>
							</div>
						</div>
						<div class="form-group">
							<div class="input-group">
								<input class="form-control" name="login_sms" id="login_sms" placeholder="输入验证码"  maxlength="5" type="text" style="height: 35px;border-radius:3px;"/>
								<span class="input-group-btn">
									<span id="idcode" alt="点击更换" title="点击更换"
										  style=" border:1px solid #ccc;border-radius:50%;"></span>
								</span>

							</div>
						</div>

						<div class="checkbox">
	                        <label>
	                        	<input checked="" id="login_checkbox" type="checkbox"><i></i> 30天内免登录
	                        </label>
	                        <a href="javascript:;" class="pull-right" id="resetpwd">忘记密码？</a>
	                    </div>
	                    <!-- 错误信息 -->
						<div class="form-group">
							<div class="error_msg" id="login_error">
								<!-- 错误信息 范例html
								<div class="alert alert-warning alert-dismissible fade in" role="alert">
									<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
									<strong>密码错误</strong> 请重新输入密码
								</div>
								 -->
							</div>
						</div>
	                    <button class="btn btn-large btn-primary btn-lg btn-block submit" id="login_submit" type="button">登录</button><br>
	                    <p class="text-center">没有账号？<a href="javascript:;" id="register">免费注册</a></p>
                    </form>
					<span>其他登录方式：</span><img src="/images/Connect_logo_1.png" onclick="NewPage('/authorizeUrl.html')"/>
                    <div class="tabs_div">
	                    <div class="success-box">
	                    	<div class="success-msg">
								<i class="success-icon"></i>
	                    		<p class="success-text">登录成功</p>
	                    	</div>
	                    </div>
	                    <div class="option-box">
	                    	<div class="buts-title">
	                    		现在您可以
	                    	</div>
	                    	<div class="buts-box">
	                    		<a role="button" href="index.html" class="btn btn-block btn-lg btn-default">继续访问商城</a>
								<a role="button" href="udai_welcome.html" class="btn btn-block btn-lg btn-info">登录会员中心</a>
	                    	</div>
	                    </div>
                    </div>
                </div>
			</div>
			<div class="form-box register">
  				<div class="tabs-nav">
  					<h2>欢迎注册<a href="javascript:;" class="pull-right fz16" id="reglogin">返回登录</a></h2>
  				</div>
  				<div class="tabs_container">
					<form class="tabs_form" action="index.html" method="post" id="register_form">
						<div class="form-group">
							<div class="input-group">
								<div class="input-group-addon">
									<span class="glyphicon glyphicon-phone" aria-hidden="true"></span>
								</div>
								<input class="form-control phone" name="phone" id="register_phone" required placeholder="手机号/邮箱" maxlength="32" autocomplete="off" type="text"/>
							</div>
						</div>
						<div class="form-group">
							<div class="input-group">
								<input class="form-control" name="smscode" id="register_sms" placeholder="输入验证码" type="text"/>
								<span class="input-group-btn">
									<button class="btn btn-primary getsms" type="button" id="regis_sms">发送短信验证码</button>
								</span>
							</div>
						</div>
						<div class="form-group">
							<div class="input-group">
								<div class="input-group-addon">
									<span class="glyphicon glyphicon-lock" aria-hidden="true"></span>
								</div>
								<input class="form-control password" name="password" id="register_pwd" placeholder="请输入密码" autocomplete="off" type="password"/>
								<div class="input-group-addon pwd-toggle" title="显示密码"><span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span></div>
							</div>
						</div>
						<div class="checkbox">
	                        <label>
	                        	<input checked="" id="register_checkbox" type="checkbox"><i></i> 同意<a href="temp_article/udai_article3.html">U袋网用户协议</a>
	                        </label>
	                    </div>
	                    <!-- 错误信息 -->
						<div class="form-group">
							<div class="error_msg" id="register_error"></div>
						</div>
	                    <button class="btn btn-large btn-primary btn-lg btn-block submit" id="register_submit" type="button">注册</button>
                    </form>
                    <div class="tabs_div">
	                    <div class="success-box">
	                    	<div class="success-msg">
								<i class="success-icon"></i>
	                    		<p class="success-text">注册成功</p>
	                    	</div>
	                    </div>
	                    <div class="option-box">
	                    	<div class="buts-title">
	                    		现在您可以
	                    	</div>
	                    	<div class="buts-box">
	                    		<a role="button" href="index.html" class="btn btn-block btn-lg btn-default">继续访问商城</a>
								<a role="button" href="udai_welcome.html" class="btn btn-block btn-lg btn-info">登录会员中心</a>
	                    	</div>
	                    </div>
                    </div>
                </div>
			</div>
			<div class="form-box resetpwd">
  				<div class="tabs-nav clearfix">
  					<h2>找回密码<a href="javascript:;" class="pull-right fz16" id="pwdlogin">返回登录</a></h2>
  				</div>
  				<div class="tabs_container">
					<form class="tabs_form" action="https://rpg.blue/member.php?mod=logging&action=login" method="post" id="resetpwd_form">
						<div class="form-group">
							<div class="input-group">
								<div class="input-group-addon">
									<span class="glyphicon glyphicon-phone" aria-hidden="true"></span>
								</div>
								<input class="form-control phone" name="phone" id="resetpwd_phone" required placeholder="手机号/邮箱" maxlength="32" autocomplete="off" type="text">
							</div>
						</div>
						<div class="form-group">
							<div class="input-group">
								<input class="form-control" name="resetpwd_sms" id="resetpwd_sms" placeholder="输入验证码"  type="text">
								<span class="input-group-btn">
									<button class="btn btn-primary getsms" type="button" id="rsetpwd_sm">发送短信验证码</button>
								</span>
							</div>
						</div>
						<div class="form-group">
							<div class="input-group">
								<div class="input-group-addon">
									<span class="glyphicon glyphicon-lock" aria-hidden="true"></span>
								</div>
								<input class="form-control password" name="password" id="resetpwd_pwd" placeholder="新的密码" autocomplete="off" type="password">
								<div class="input-group-addon pwd-toggle" title="显示密码"><span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span></div>
							</div>
						</div>
	                    <!-- 错误信息 -->
						<div class="form-group">
							<div class="error_msg" id="resetpwd_error"></div>
						</div>
	                    <button class="btn btn-large btn-primary btn-lg btn-block submit" id="resetpwd_submit" type="button">重置密码</button>
                    </form>
                    <div class="tabs_div">
	                    <div class="success-box">
	                    	<div class="success-msg">
								<i class="success-icon"></i>
	                    		<p class="success-text">密码重置成功</p>
	                    	</div>
	                    </div>
	                    <div class="option-box">
	                    	<div class="buts-title">
	                    		现在您可以
	                    	</div>
	                    	<div class="buts-box">
	                    		<a role="button" href="index.html" class="btn btn-block btn-lg btn-default">继续访问商城</a>
								<a role="button" href="login.html" class="btn btn-block btn-lg btn-info">返回登陆</a>
	                    	</div>
	                    </div>
                    </div>
                </div>
			</div>
			<script>
                $(function () {
                    var result;
                    var url=window.location.search; //获取url中"?"符后的字串
                    if(url.indexOf("?")!=-1){
                        result = url.substr(url.indexOf("=")+1);
                    }
                    $("#login_phone").val(result);
                });
				$(document).ready(function() {
					// 判断直接进入哪个页面 例如 login.php?p=register
					switch($.getUrlParam('p')) {
						case 'register': $('.register').show(); break;
						case 'resetpwd': $('.resetpwd').show(); break;
						default: $('.login').show();
					};
					// 注册发送验证码事件
                    $('#regis_sms').click(function() {
                        var phone = $(this).parents('form').find('input.phone');
                        var error = $(this).parents('form').find('.error_msg');
                        var yzNum = $('#register_phone').val();
                        switch(phone.validatemobile()) {
                            case 0:
                                // 短信验证码的php请求
                                $.ajax({
                                    url:"/ageless/sendMessage",
                                    data:"yzNum="+yzNum,
                                    dataType:"json",
                                    success:function (data) {
                                        if (data.back=='成功') {
                                            $('#regis_sms').rewire(60);
                                            error.html(msgtemp('验证码 <strong>已发送</strong>','alert-success'));
                                        }else if(data.back=='重复'){
                                            error.html(msgtemp('该账号已被注册 <strong>请重新输入',  'alert-warning'));
                                        }
                                    },
                                    error:function (data) {
                                        alert("失败");
                                    },
                                });
                                break;
                            case 1: error.html(msgtemp('<strong></strong> 请输入手机号码/邮箱/会员名',    'alert-warning')); break;
                            case 2: error.html(msgtemp('<strong>手机号码错误</strong> 请输入11位数的号码','alert-warning')); break;
                            case 3: error.html(msgtemp('<strong>手机号码/邮箱错误</strong> 请输入正确的号码/邮箱',  'alert-warning')); break;
                            case 4:
                                $('#regis_sms').rewire(60);
                                $.ajax({
                                    url:"/ageless/sendEmail",
                                    data:"yzNum="+yzNum,
                                    dataType:"json",
                                    async: true,
                                    success:function (data) {
                                        if (data.back=='成功') {
                                            error.html(msgtemp('验证码 <strong>已送达</strong>','alert-success'));
                                        }else if(data.back=='重复'){
                                            error.html(msgtemp('该账号已被注册 <strong>请重新输入',  'alert-warning'));
                                        }
                                    },
                                    error:function (data) {
                                        alert("失败");
                                    }
                                });
                                break;
                        }
                    });
                    // 忘记密码发送验证码事件
                    $('#rsetpwd_sm').click(function() {
                        var phone = $(this).parents('form').find('input.phone');
                        var error = $(this).parents('form').find('.error_msg');
                        var yzNum = $('#resetpwd_phone').val();
                        switch(phone.validatemobile()) {
                            case 0:
                                // 短信验证码的php请求
                                $.ajax({
                                    url:"/ageless/sendMessage1",
                                    data:"yzNum="+yzNum,
                                    dataType:"json",
                                    success:function (data) {
                                        if (data.back=='成功') {
                                            error.html(msgtemp('该账号未注册 <strong>请重新输入',  'alert-warning'));
                                        }else if(data.back=='重复'){
                                            $('#rsetpwd_sm').rewire(60);
                                            error.html(msgtemp('验证码 <strong>已发送</strong>','alert-success'));

                                        }

                                    },
                                    error:function (data) {
                                        alert("失败重置密码");
                                    },
                                });
                                break;
                            case 1: error.html(msgtemp('<strong></strong> 请输入手机号码/邮箱/会员名',    'alert-warning')); break;
                            case 2: error.html(msgtemp('<strong>手机号码错误</strong> 请输入11位数的号码','alert-warning')); break;
                            case 3: error.html(msgtemp('<strong>手机号码/邮箱错误</strong> 请输入正确的号码/邮箱',  'alert-warning')); break;
                            case 4:
                                $('#rsetpwd_sm').rewire(60);
                                $.ajax({
                                    url:"/ageless/sendEmail1",
                                    data:"yzNum="+yzNum,
                                    dataType:"json",
                                    success:function (data) {
                                        if (data.back=='未注册') {
                                            error.html(msgtemp('该账号未注册 <strong>请重新输入',  'alert-warning'));
                                        }else if(data.back=='成功'){
                                            error.html(msgtemp('验证码 <strong>已送达</strong>','alert-success'));
                                        }
                                    },
                                    error:function () {
                                        alert("失败重置秘密啊邮箱");
                                    }
                                });
                                break;
                        }
                    });
					// 以下确定按钮仅供参考
					$.idcode.setCode();
					$('#login_submit').click(function() {
						var form = $(this).parents('form')
						var phone = form.find('input.phone');
						var pwd = form.find('input.password');
						var error = form.find('.error_msg');
						var success = form.siblings('.tabs_div');
						var sms= form.find('input.login_sms');
						var options = {
							beforeSubmit: function () {
								console.log('喵喵喵')
							},
							success: function (data) {
								console.log(data)
							}
						}
						// 验证手机号参考这个
						switch(phone.validatemobile()) {
							case 1: error.html(msgtemp('<strong></strong> 请输入手机号码/邮箱/会员名',    'alert-warning')); return; break;
							case 2: error.html(msgtemp('<strong>手机号码错误</strong> 请输入11位数的号码','alert-warning')); return; break;
							case 3: error.html(msgtemp('<strong>手机号码/邮箱/会员名错误</strong> 请输入正确的号码/邮箱/会员名',  'alert-warning')); return; break;
						}
						// 验证密码复杂度参考这个
						switch(pwd.validatepwd()) {
							case 1: error.html(msgtemp('<strong>密码不能为空</strong> 请输入密码',    'alert-warning')); return; break;
							case 2: error.html(msgtemp('<strong>密码过短</strong> 请输入6位以上的密码','alert-warning')); return; break;
							case 3: error.html(msgtemp('<strong>密码过于简单</strong><br>密码需为字母、数字或特殊字符组合',  'alert-warning')); return; break;
						}

						// 验证码
                        switch(sms.login_sms()) {
                            case 1: error.html(msgtemp('<strong>验证码不能为空</strong> 请输入验证码','alert-warning')); return; break;
                            case 2: error.html(msgtemp('<strong>验证码输入有误</strong> 请输入验证码','alert-warning')); return; break;
                        }
						form.ajaxForm(options);
						// 请求成功执行类似这样的事件
						// form.fadeOut(150,function() {
						// 	success.fadeIn(150);
						// });

                        var AccountNumber=$("#login_phone").val();
                        var UserPwd=$("#login_pwd").val();
                        var membership=null;//会员名
                        var phone=null;//手机号
                        var mailbox=null;//邮箱
						if(AccountNumber.indexOf("@") != -1){ //邮箱验证
                            mailbox=AccountNumber;
					    }else if(AccountNumber.indexOf("t") != -1){ //会员名验证
                            membership=AccountNumber;
                        }else{ //手机号验证
                            phone=AccountNumber;
                        }

                        $.ajax({
                            url:"/ageless/user/loginUser",
                            data:{membership:membership,phone:phone,
								   mailbox:mailbox,loginpwd:UserPwd},
                            type:"post",
							dataType:"json",
                            success:function(result){
								if (result.mes=="success"){
									location.href="/ageless/index.html";
								}else if(result.mes=="frozen"){
								    alert("该账号已被冻结！")
								}else if(result.mes=="error"){
                                    alert("用户名或密码有误，请重新登录！")
								}
							},error:function () {
                                alert("链接服务器失败！");
                            }
                        })
					})
				});
                $('#register_submit').click(function() {
                    var form = $(this).parents('form')
                    var phone = form.find('input.phone');
                    var pwd = form.find('input.password');
                    var error = form.find('.error_msg');
                    var getsms = form.find('#register_sms');
                    var success = form.siblings('.tabs_div');
                    var numBack = form.find('#register_sms').val();
                    var phoneNo =form.find('input.phone').val();
                    var pwdNum = form.find('input.password').val();
                    var options = {
                        beforeSubmit: function () {
                            console.log('喵喵喵')
                        },
                        success: function (data) {
                            console.log(data)
                        }
                    }
                    // 验证手机号参考这个
                    switch(phone.validatemobile()) {
                        case 1: error.html(msgtemp('<strong></strong> 请输入手机号/邮箱/会员名',    'alert-warning')); return; break;
                        case 2: error.html(msgtemp('<strong>手机号码错误</strong> 请输入11位数的号码','alert-warning')); return; break;
                        case 3: error.html(msgtemp('<strong></strong> 请输入正确的号码/邮箱/会员名',  'alert-warning')); return; break;
                    }
                    // 密码复杂度参考这个
                    switch(pwd.validatepwd()) {
                        case 1: error.html(msgtemp('<strong></strong> 请输入密码',    'alert-warning')); return; break;
                        case 2: error.html(msgtemp('<strong>密码过短</strong> 请输入6位以上的密码','alert-warning')); return; break;
                        case 3: error.html(msgtemp('<strong>密码过于简单</strong><br>密码需为字母、数字或特殊字符组合',  'alert-warning')); return; break;
                    }
                    // 验证码是否为空
                    switch(getsms.validatemess()) {
                        case 1: error.html(msgtemp('<strong></strong> 请输入验证码','alert-warning')); return; break;
                        case 2:
                            $.ajax({
                                url:"/ageless/addMember",
                                data:"numBack="+numBack+"&phoneNo="+phoneNo+"&pwdNum="+pwdNum,
                                dataType:"json",
                                success:function(data){
                                    if(data.back=='对的'){
                                        location.href="login.html?values="+phoneNo;
                                    }else if(data.back=='超时'){
                                        error.html(msgtemp('<strong>验证码过期</strong>请重新获取验证码','alert-warning'));
                                    }else if(data.back=='重复'){
                                        error.html(msgtemp('<strong>该账号已被注册</strong>请重新输入','alert-warning'));
                                    }else{
                                        error.html(msgtemp('<strong>验证码错误</strong> 请输入正确的验证码','alert-warning'));
                                    }
                                },
                                error:function () {
                                    error.html(msgtemp('<strong>验证码错误1</strong> 请输入正确的验证码','alert-warning'));
                                }
                            });
                            break;
                    }
                    form.ajaxForm(options);
                    // 请求成功执行类似这样的事件
                    // form.fadeOut(150,function() {
                    // 	success.fadeIn(150);
                    // });

                });
                //重置密码按钮
                $('#resetpwd_submit').click(function() {
                    var form = $(this).parents('form')
                    var phone = form.find('input.phone');
                    var pwd = form.find('input.password');
                    var error = form.find('.error_msg');
                    var getsms = form.find('#resetpwd_sms');
                    var success = form.siblings('.tabs_div');
                    var numBack = form.find('#resetpwd_sms').val();
                    var phoneNo =form.find('input.phone').val();
                    var pwdNum = form.find('input.password').val();
                    var options = {
                        beforeSubmit: function () {
                            console.log('喵喵喵')
                        },
                        success: function (data) {
                            console.log(data)
                        }
                    }
                    // 验证手机号参考这个
                    switch(phone.validatemobile()) {
                        case 1: error.html(msgtemp('<strong></strong> 请输入手机号/邮箱/会员名',    'alert-warning')); return; break;
                        case 2: error.html(msgtemp('<strong>手机号码错误</strong> 请输入11位数的号码','alert-warning')); return; break;
                        case 3: error.html(msgtemp('<strong></strong> 请输入正确的号码/邮箱/会员名',  'alert-warning')); return; break;
                    }
                    // 密码复杂度参考这个
                    switch(pwd.validatepwd()) {
                        case 1: error.html(msgtemp('<strong></strong> 请输入密码',    'alert-warning')); return; break;
                        case 2: error.html(msgtemp('<strong>密码过短</strong> 请输入6位以上的密码','alert-warning')); return; break;
                        case 3: error.html(msgtemp('<strong>密码过于简单</strong><br>密码需为字母、数字或特殊字符组合',  'alert-warning')); return; break;
                    }
                    // 验证码是否为空
                    switch(getsms.validatemess()) {
                        case 1: error.html(msgtemp('<strong></strong> 请输入验证码','alert-warning')); return; break;
                        case 2:
                            $.ajax({
                                url:"/ageless/updateMember",
                                data:"numBack="+numBack+"&phoneNo="+phoneNo+"&pwdNum="+pwdNum,
                                dataType:"json",
                                success:function(data){
                                    if(data.back=='对的'){
                                        location.href="login.html?values="+phoneNo;
                                    }else if(data.back=='超时'){
                                        error.html(msgtemp('<strong>验证码过期</strong>请重新获取验证码','alert-warning'));
                                    }else if(data.back=='重复'){
                                        error.html(msgtemp('<strong>该账号未注册</strong>请重新输入','alert-warning'));
                                    }else{
                                        error.html(msgtemp('<strong>验证码错误</strong> 请输入正确的验证码','alert-warning'));
                                    }
                                },
                                error:function () {
                                    error.html(msgtemp('<strong>验证码错误1</strong> 请输入正确的验证码','alert-warning'));
                                }
                            });
                            break;
                    }
                    form.ajaxForm(options);
                    // 请求成功执行类似这样的事件
                    // form.fadeOut(150,function() {
                    // 	success.fadeIn(150);
                    // });

                });
                //第三方登录执行方法
               /* function NewPage(page) {
                    window.open(page,"TencentLogin");
                }*/
			</script>
		</div>
	</div>
	<div class="footer-login container clearfix">
		<ul class="links">
			<a href=""><li>网店代销</li></a>
			<a href=""><li>U袋学堂</li></a>
			<a href=""><li>联系我们</li></a>
			<a href=""><li>企业简介</li></a>
			<a href=""><li>新手上路</li></a>
		</ul>
		<!-- 版权 -->
		<p class="copyright">
			© 2005-2017 U袋网 版权所有，并保留所有权利<br>
			ICP备案证书号：闽ICP备16015525号-2&nbsp;&nbsp;&nbsp;&nbsp;福建省宁德市福鼎市南下村小区（锦昌阁）1栋1梯602室&nbsp;&nbsp;&nbsp;&nbsp;Tel: 18650406668&nbsp;&nbsp;&nbsp;&nbsp;E-mail: 18650406668@qq.com
		</p>
	</div>
</body>
</html>